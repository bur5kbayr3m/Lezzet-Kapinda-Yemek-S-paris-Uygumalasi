@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LezzetKapında - Admin Panel Giriş</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white text-gray-800 min-h-screen flex items-center justify-center">
    
    <!-- Admin Login Form Container -->
    <div class="bg-white rounded-xl w-full max-w-md shadow-lg p-8">
        <h2 class="text-[#181111] text-2xl font-bold text-center mb-6">Admin Panel Giriş</h2>

        <!-- Error Message -->
        <div id="adminLoginErrorMsg" class="hidden text-center text-red-600 mb-2 text-sm font-semibold"></div>

        <!-- Email Input -->
        <div class="mb-4">
            <input id="adminEmail" type="email" placeholder="E-posta"
                   class="w-full rounded-xl bg-[#f4f0f0] h-12 px-4 placeholder:text-[#886363] text-base focus:outline-none" />
        </div>

        <!-- Password Input -->
        <div class="mb-4">
            <input id="adminPassword" type="password" placeholder="Şifre"
                   class="w-full rounded-xl bg-[#f4f0f0] h-12 px-4 placeholder:text-[#886363] text-base focus:outline-none" />
        </div>

        <!-- Login Button -->
        <button onclick="handleAdminLogin()" type="button"
                class="w-full bg-[#ea4747] text-white rounded-full h-12 font-bold text-base mb-2">
            Giriş Yap
        </button>
        
        <!-- Back to Main Site Link -->
        <p class="text-center text-[#886363] text-sm underline cursor-pointer mt-2">
            <a href="/">Ana Siteye Dön</a>
        </p>
    </div>

    <!-- Success Toast -->
    <div id="toast-admin-login-success" class="fixed top-4 right-4 z-50 hidden bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded shadow-md transition-opacity duration-500">
        <strong class="font-bold">Başarılı!</strong>
        <span class="block sm:inline">Giriş başarılı, yönlendiriliyorsunuz...</span>
    </div>

    <script>
        function showAdminLoginError(msg) {
            const err = document.getElementById("adminLoginErrorMsg");
            err.textContent = msg;
            err.classList.remove("hidden");
        }

        function clearAdminLoginError() {
            document.getElementById("adminLoginErrorMsg").classList.add("hidden");
            document.getElementById("adminLoginErrorMsg").textContent = "";
        }

        async function handleAdminLogin() {
            clearAdminLoginError();
            const email = document.getElementById("adminEmail").value.trim();
            const password = document.getElementById("adminPassword").value;

            if (!email || !password) {
                showAdminLoginError("Lütfen tüm alanları doldurun.");
                return;
            }

            const bodyObj = { email, password };

            try {
                const response = await fetch("/api/admin/login", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(bodyObj)
                });

                if (!response.ok) {
                    let errorMsg = "Giriş başarısız.";
                    try {
                        const data = await response.json();
                        if (data.errors) errorMsg = Object.values(data.errors).flat().join(" ");
                        else if (data.title) errorMsg = data.title;
                    } catch { }
                    showAdminLoginError(errorMsg);
                    return;
                }

                const data = await response.json();
                if (data.token) {
                    localStorage.setItem("adminToken", data.token);
                    document.cookie = "adminToken=" + data.token + "; path=/";
                }

                document.getElementById("toast-admin-login-success").classList.remove("hidden");
                setTimeout(() => {
                    document.getElementById("toast-admin-login-success").classList.add("hidden");
                    // You can redirect to admin dashboard here
                    // window.location.href = "/admin/dashboard";
                    alert("Admin giriş başarılı! Dashboard sayfası henüz oluşturulmamış.");
                }, 1200);
            } catch (e) {
                showAdminLoginError("Sunucu hatası! " + e);
            }
        }

        // Allow enter key to submit
        document.addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                handleAdminLogin();
            }
        });
    </script>
</body>
</html>